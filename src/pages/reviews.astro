---
import Layout from '~/layouts/PageLayout.astro';
import Hero2 from '~/components/widgets/Hero2.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import { Icon } from 'astro-icon/components';

const metadata = {
  title: 'Customer Reviews',
  description: 'See what Sylvan Lake customers say about our auto repair service. 4.9 stars from 291+ Google reviews. Read real feedback about our honest, transparent approach to vehicle maintenance and repair.',
};

const localBusinessSchema = {
  "@context": "https://schema.org",
  "@type": "AutoRepair",
  "name": "Sylvan Lake AUTOPRO",
  "telephone": "+1-403-887-0440",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "1A Industrial Dr",
    "addressLocality": "Sylvan Lake",
    "addressRegion": "AB",
    "postalCode": "T4S 1P4",
    "addressCountry": "CA"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "reviewCount": "291"
  },
  "review": [
    {
      "@type": "Review",
      "author": { "@type": "Person", "name": "G Klewy" },
      "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
      "reviewBody": "Autopro has something I value above anything else. INTEGRITY. There was a problem with my vehicle that they could not fix. They had the honesty to tell me upfront rather than string me along."
    },
    {
      "@type": "Review",
      "author": { "@type": "Person", "name": "Darren Burns" },
      "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
      "reviewBody": "Excellent local Automotive Shop & Service in Sylvan Lake. Their Service is impeccable. Really. Absolutely excellent. Out of Province Inspections were a little less expensive here compared to Red Deer. I really appreciated how they take pictures of repairs that are required—along with excellent follow-up. This is a first rate Shop."
    },
    {
      "@type": "Review",
      "author": { "@type": "Person", "name": "Jonathan Alday" },
      "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
      "reviewBody": "Very reliable auto repair shop. I was from out of town when I had a problem with my front brakes system (brake calliper was loose). I called few hours before the auto shop was closing, but they still accepted me to repair my vehicle."
    },
    {
      "@type": "Review",
      "author": { "@type": "Person", "name": "Marie Lucas" },
      "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
      "reviewBody": "I had a few issues with my vehicle in July and November this year. Staff listened, work completed in a timely manner. They have a loaner vehicle which was very much appreciated. It was clean, filled with gas and it ran smoothly. Staff kept me informed throughout."
    },
    {
      "@type": "Review",
      "author": { "@type": "Person", "name": "Derek Sparrow" },
      "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
      "reviewBody": "Sylvan Lake Autopro are amazing to deal with. The mechanics, front office staff, and management are all awesome to deal with. They do a thorough job. Anyone looking to extend the life of their vehicle, instead of jumping into something new, these are the people to see."
    },
    {
      "@type": "Review",
      "author": { "@type": "Person", "name": "Enerzon Endrinal" },
      "reviewRating": { "@type": "Rating", "ratingValue": "5", "bestRating": "5" },
      "reviewBody": "Great experience at Sylvan Lake NAPA AutoPro! Reasonable prices, friendly staff, and very accommodating—especially Michelle. Big shout-out to Josh for the excellent work!"
    },
    {
      "@type": "Review",
      "author": { "@type": "Person", "name": "Jennifer Hinchliff" },
      "reviewRating": { "@type": "Rating", "ratingValue": "4", "bestRating": "5" },
      "reviewBody": "UPDATE: Following my initial review of the shop, Clint reached out to me and assisted to rectify the concerns present. He was very easy to talk to and work with and am very grateful he took the time to correct the concerns. At this time, I would say I value their honesty and time taken to help come to a solution. My car has been repaired at no cost to me and I am very thankful that accountability and understanding was something I was provided throughout this experience."
    }
  ]
};

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://sylvanlakeautopro.com/" },
    { "@type": "ListItem", "position": 2, "name": "Customer Reviews" }
  ]
};

const googleReviewsUrl = "https://g.page/sylvan-lake-autopro";

// Avatar background colors (rotating for visual variety)
const avatarColors = ['bg-blue-600', 'bg-green-600', 'bg-purple-600', 'bg-orange-500', 'bg-teal-600', 'bg-pink-600'];

interface Review {
  name: string;
  rating: number;
  text: string;
  response?: string;
  tag: string;
}

const reviews: Review[] = [
  {
    name: "G Klewy",
    rating: 5,
    text: "Autopro has something I value above anything else. INTEGRITY. There was a problem with my vehicle that they could not fix. They had the honesty to tell me upfront rather than string me along.",
    response: "Thank you. 'Integrity' is the highest compliment we could receive. The reality of this business is that we don't always get it right the first time, and parts do fail. We might not be the cheapest place to go, but we guarantee we will look after you.",
    tag: "Trust & Integrity"
  },
  {
    name: "Darren Burns",
    rating: 5,
    text: "Excellent local Automotive Shop & Service in Sylvan Lake. Their Service is impeccable. Really. Absolutely excellent. Out of Province Inspections were a little less expensive here compared to Red Deer. I really appreciated how they take pictures of repairs that are required—along with excellent follow-up. This is a first rate Shop. For Automotive Service, I have absolutely no hesitation in recommending this business as one of your first calls.",
    tag: "Quality & Communication"
  },
  {
    name: "Jonathan Alday",
    rating: 5,
    text: "Very reliable auto repair shop. I was from out of town when I had a problem with my front brakes system (brake calliper was loose). I called few hours before the auto shop was closing, but they still accepted me to repair my vehicle.",
    tag: "Above & Beyond"
  },
  {
    name: "Marie Lucas",
    rating: 5,
    text: "I had a few issues with my vehicle in July and November this year. Staff listened, work completed in a timely manner. They have a loaner vehicle which was very much appreciated. It was clean, filled with gas and it ran smoothly. Staff kept me informed throughout.",
    tag: "Amenities & Care"
  },
  {
    name: "Derek Sparrow",
    rating: 5,
    text: "Sylvan Lake Autopro are amazing to deal with. The mechanics, front office staff, and management are all awesome to deal with. They do a thorough job. Anyone looking to extend the life of their vehicle, instead of jumping into something new, these are the people to see.",
    tag: "Team & Professionalism"
  },
  {
    name: "Enerzon Endrinal",
    rating: 5,
    text: "Great experience at Sylvan Lake NAPA AutoPro! Reasonable prices, friendly staff, and very accommodating—especially Michelle. Big shout-out to Josh for the excellent work!",
    tag: "Friendly Staff"
  }
];
---

<Layout metadata={metadata}>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(localBusinessSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
  </Fragment>

  <!-- Hero Section -->
  <Hero2
    tagline="Real Feedback"
    title="What Our Customers Say"
    subtitle="4.9 ★ from 291+ Google Reviews"
    actions={[
      { variant: 'primary', text: 'Read All Reviews on Google', href: googleReviewsUrl, target: '_blank' },
      { variant: 'secondary', text: 'Book Service', href: 'https://sylvanlakeautopro.autotext.me/Admin/kioskv2/index.php?id=WTNHaFJhb1g1dk9YV3g1YmpkUEx3QT09&kiosk=1', target: '_blank' },
    ]}
  />

  <!-- Trust Badges -->
  <section class="py-6 bg-gray-50 dark:bg-slate-800 border-y border-gray-200 dark:border-slate-700">
    <div class="max-w-5xl mx-auto px-4">
      <div class="flex flex-wrap justify-center items-center gap-4 md:gap-8 text-sm md:text-base text-muted dark:text-slate-400">
        <div class="flex items-center gap-2">
          <Icon name="tabler:calendar-check" class="w-5 h-5 text-primary dark:text-blue-400" />
          <span>Same owners since 2006</span>
        </div>
        <div class="hidden md:block w-px h-5 bg-gray-300 dark:bg-slate-600"></div>
        <div class="flex items-center gap-2">
          <Icon name="tabler:users" class="w-5 h-5 text-primary dark:text-blue-400" />
          <span>Women-owned</span>
        </div>
        <div class="hidden md:block w-px h-5 bg-gray-300 dark:bg-slate-600"></div>
        <div class="flex items-center gap-2">
          <Icon name="tabler:trophy" class="w-5 h-5 text-primary dark:text-blue-400" />
          <span>JD Power Award Winner</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Reviews Section -->
  <section class="py-12 md:py-16 lg:py-20">
    <div class="max-w-6xl mx-auto px-4 md:px-6">
      <div class="text-center mb-10 md:mb-14">
        <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold font-heading dark:text-white mb-3">Featured Reviews</h2>
        <p class="text-muted dark:text-slate-400">Hand-picked reviews that represent what we strive for every day</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {reviews.map((review, index) => (
          <div class="bg-white dark:bg-slate-900 rounded-lg shadow-md border border-gray-100 dark:border-slate-700 p-5 flex flex-col">
            <!-- Header: Avatar, Name, Review Count -->
            <div class="flex items-start gap-3 mb-3">
              <div class={`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold text-lg flex-shrink-0 ${avatarColors[index % avatarColors.length]}`}>
                {review.name.charAt(0)}
              </div>
              <div class="min-w-0">
                <p class="font-semibold text-gray-900 dark:text-white truncate">{review.name}</p>
                <p class="text-xs text-gray-500 dark:text-slate-500">Google review</p>
              </div>
            </div>

            <!-- Star Rating & Tag -->
            <div class="flex items-center gap-3 mb-3">
              <div class="flex items-center gap-0.5">
                {[...Array(5)].map((_, i) => (
                  <Icon
                    name="tabler:star-filled"
                    class={`w-4 h-4 ${i < review.rating ? 'text-[#FBBC04]' : 'text-gray-300 dark:text-slate-600'}`}
                  />
                ))}
              </div>
              <span class="text-xs px-2 py-0.5 rounded-full bg-primary/10 text-primary dark:bg-blue-900/30 dark:text-blue-300 font-medium">
                {review.tag}
              </span>
            </div>

            <!-- Review Text -->
            <p class="text-gray-700 dark:text-slate-300 text-sm leading-relaxed flex-grow mb-4">
              "{review.text}"
            </p>

            <!-- Owner Response (if exists) -->
            {review.response && (
              <div class="mt-auto pt-4 border-t border-gray-100 dark:border-slate-700">
                <p class="text-xs font-semibold text-[#1A73E8] dark:text-blue-400 mb-1">Response from the owner</p>
                <p class="text-xs text-gray-600 dark:text-slate-400 leading-relaxed">{review.response}</p>
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Service Recovery Section -->
  <section class="py-12 md:py-16 lg:py-20 bg-gray-50 dark:bg-slate-800">
    <div class="max-w-4xl mx-auto px-4 md:px-6">
      <div class="text-center mb-10">
        <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold font-heading dark:text-white mb-3">When Things Go Wrong, We Make Them Right</h2>
        <p class="text-muted dark:text-slate-400 max-w-2xl mx-auto">
          No shop is perfect. Parts fail. Mistakes happen. What matters is what happens next. Here's a real example of how we handle it when things don't go as planned.
        </p>
      </div>

      <!-- Jennifer's Story Card -->
      <div class="bg-white dark:bg-slate-900 rounded-xl shadow-lg border-2 border-primary/20 dark:border-blue-800 p-6 md:p-8">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row sm:items-start gap-4 mb-4">
          <div class="flex items-start gap-3">
            <div class="w-12 h-12 rounded-full bg-rose-500 flex items-center justify-center text-white font-semibold text-xl flex-shrink-0">
              J
            </div>
            <div>
              <p class="font-semibold text-gray-900 dark:text-white text-lg">Jennifer Hinchliff</p>
              <p class="text-xs text-gray-500 dark:text-slate-500">Google review</p>
            </div>
          </div>
          <div class="sm:ml-auto">
            <span class="inline-flex items-center gap-1.5 text-xs px-3 py-1 rounded-full bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-medium">
              <Icon name="tabler:arrow-up" class="w-3 h-3" />
              Rating changed from 1★ to 4★
            </span>
          </div>
        </div>

        <!-- Star Rating -->
        <div class="flex items-center gap-0.5 mb-4">
          {[...Array(5)].map((_, i) => (
            <Icon
              name="tabler:star-filled"
              class={`w-5 h-5 ${i < 4 ? 'text-[#FBBC04]' : 'text-gray-300 dark:text-slate-600'}`}
            />
          ))}
          <span class="ml-2 text-sm text-gray-500 dark:text-slate-400">Updated review</span>
        </div>

        <!-- Review Text -->
        <blockquote class="text-gray-700 dark:text-slate-300 leading-relaxed mb-6 pl-4 border-l-4 border-primary dark:border-blue-500">
          "UPDATE: Following my initial review of the shop, Clint reached out to me and assisted to rectify the concerns present. He was very easy to talk to and work with and am very grateful he took the time to correct the concerns. At this time, I would say I value their honesty and time taken to help come to a solution. My car has been repaired at no cost to me and I am very thankful that accountability and understanding was something I was provided throughout this experience."
        </blockquote>

        <!-- What Happened Box -->
        <div class="bg-gray-50 dark:bg-slate-800 rounded-lg p-4 mb-6">
          <p class="font-semibold text-gray-900 dark:text-white mb-2">What happened:</p>
          <p class="text-sm text-muted dark:text-slate-400">
            Jennifer found issues with previous repair work. After posting her concerns, Clint personally reached out, reviewed the situation, and repaired her vehicle at no cost.
          </p>
        </div>

        <!-- Key Points -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-full bg-primary/10 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0">
              <Icon name="tabler:clock" class="w-4 h-4 text-primary dark:text-blue-400" />
            </div>
            <p class="text-sm text-gray-700 dark:text-slate-300">Personal response within hours</p>
          </div>
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-full bg-primary/10 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0">
              <Icon name="tabler:currency-dollar-off" class="w-4 h-4 text-primary dark:text-blue-400" />
            </div>
            <p class="text-sm text-gray-700 dark:text-slate-300">Problem resolved at no cost</p>
          </div>
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-full bg-primary/10 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0">
              <Icon name="tabler:heart-handshake" class="w-4 h-4 text-primary dark:text-blue-400" />
            </div>
            <p class="text-sm text-gray-700 dark:text-slate-300">"Accountability and understanding"</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <CallToAction
    title="Ready to Experience the Difference?"
    subtitle="Join 291+ customers who trust us with their vehicles."
    actions={[
      { variant: 'primary', text: 'Book Service Online', href: 'https://sylvanlakeautopro.autotext.me/Admin/kioskv2/index.php?id=WTNHaFJhb1g1dk9YV3g1YmpkUEx3QT09&kiosk=1', target: '_blank' },
      { variant: 'secondary', text: 'Call (403) 887-0440', href: 'tel:+14038870440', class: 'md:hidden' },
      { variant: 'secondary', text: 'Get Directions', href: 'https://www.google.com/maps/dir/?api=1&destination=NAPA+AUTOPRO+-+Sylvan+Lake+AUTOPRO+Inc&destination_place_id=ChIJM5AeqqSydVMRS6-I0MZs35U', class: 'hidden md:inline-flex' },
    ]}
  />

  <!-- Google Reviews Link -->
  <section class="py-8 bg-gray-50 dark:bg-slate-800">
    <div class="text-center">
      <a
        href={googleReviewsUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 text-primary hover:text-primary/80 dark:text-blue-400 dark:hover:text-blue-300 font-medium transition-colors"
      >
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
          <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
          <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
          <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
          <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
        </svg>
        Read all 291+ reviews on Google
      </a>
    </div>
  </section>
</Layout>
